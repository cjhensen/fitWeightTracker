angular.module("ag-app",["firebase","ui.router","templatesCache","angular-md5"]).config(["$stateProvider","$urlRouterProvider",function(e,r){e.state("home",{url:"/",templateUrl:"home.html"}).state("login",{url:"/login",controller:"AuthCtrl as authCtrl",templateUrl:"login.html",resolve:{requireNoAuth:["$state","Auth",function(e,r){return r.$requireAuth().then(function(r){e.go("home")},function(e){})}]}}).state("register",{url:"/register",controller:"AuthCtrl as authCtrl",templateUrl:"register.html",resolve:{requireNoAuth:["$state","Auth",function(e,r){return r.$requireAuth().then(function(r){e.go("home")},function(e){})}]}}).state("profile",{url:"/profile",controller:"ProfileCtrl as profileCtrl",templateUrl:"profile.html",resolve:{auth:["$state","Users","Auth",function(e,r,t){return t.$requireAuth()["catch"](function(){e.go("home")})}],profile:["Users","Auth",function(e,r){return r.$requireAuth().then(function(r){return e.getProfile(r.uid).$loaded()})}]}}),r.otherwise("/")}]).constant("FirebaseUrl","https://ag-app.firebaseio.com/"),angular.module("ag-app").controller("AuthCtrl",["Auth","$state",function(e,r){var t=this;t.user={email:"",password:""},t.login=function(){e.$authWithPassword(t.user).then(function(e){r.go("home")},function(e){t.error=e})},t.register=function(){e.$createUser(t.user).then(function(e){t.login()},function(e){t.error=e})}}]),angular.module("ag-app").controller("ProfileCtrl",["$state","md5","auth","profile",function(e,r,t,a){var o=this;o.profile=a,o.updateProfile=function(){o.profile.emailHash=r.createHash(t.password.email),o.profile.$save()}}]),angular.module("ag-app").factory("Auth",["$firebaseAuth","FirebaseUrl",function(e,r){var t=new Firebase(r),a=e(t);return a}]),angular.module("ag-app").factory("Users",["$firebaseArray","$firebaseObject","FirebaseUrl",function(e,r,t){var a=new Firebase(t+"users"),o=e(a),u={getProfile:function(e){return r(a.child(e))},getDisplayName:function(e){return o.$getRecord(e).displayName},getGravatar:function(e){return"//www.gravatar.com/avatar/"+o.$getRecord(e).emailHash},all:o};return u}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2F1dGguY3RybC5qcyIsImNvbnRyb2xsZXJzL3Byb2ZpbGUuY3RybC5qcyIsInNlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXJzLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwicmVxdWlyZU5vQXV0aCIsIiRzdGF0ZSIsIkF1dGgiLCIkcmVxdWlyZUF1dGgiLCJ0aGVuIiwiYXV0aCIsImdvIiwiZXJyb3IiLCJVc2VycyIsInByb2ZpbGUiLCJnZXRQcm9maWxlIiwidWlkIiwiJGxvYWRlZCIsIm90aGVyd2lzZSIsImNvbnN0YW50IiwiYXV0aEN0cmwiLCJ0aGlzIiwidXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJsb2dpbiIsIiRhdXRoV2l0aFBhc3N3b3JkIiwicmVnaXN0ZXIiLCIkY3JlYXRlVXNlciIsIm1kNSIsInByb2ZpbGVDdHJsIiwidXBkYXRlUHJvZmlsZSIsImVtYWlsSGFzaCIsImNyZWF0ZUhhc2giLCIkc2F2ZSIsImZhY3RvcnkiLCIkZmlyZWJhc2VBdXRoIiwiRmlyZWJhc2VVcmwiLCJyZWYiLCJGaXJlYmFzZSIsIiRmaXJlYmFzZUFycmF5IiwiJGZpcmViYXNlT2JqZWN0IiwidXNlcnNSZWYiLCJ1c2VycyIsImNoaWxkIiwiZ2V0RGlzcGxheU5hbWUiLCIkZ2V0UmVjb3JkIiwiZGlzcGxheU5hbWUiLCJnZXRHcmF2YXRhciIsImFsbCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsVUFDQSxXQUNBLFlBQ0EsaUJBQ0EsZ0JBRUFDLFFBQUEsaUJBQUEscUJBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsY0FFQUYsTUFBQSxTQUNBQyxJQUFBLFNBQ0FFLFdBQUEsdUJBQ0FELFlBQUEsYUFDQUUsU0FDQUMsZUFBQSxTQUFBLE9BQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBQSxHQUFBQyxlQUFBQyxLQUFBLFNBQUFDLEdBQ0FKLEVBQUFLLEdBQUEsU0FDQSxTQUFBQyxXQU1BWixNQUFBLFlBQ0FDLElBQUEsWUFDQUUsV0FBQSx1QkFDQUQsWUFBQSxnQkFDQUUsU0FDQUMsZUFBQSxTQUFBLE9BQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBQSxHQUFBQyxlQUFBQyxLQUFBLFNBQUFDLEdBQ0FKLEVBQUFLLEdBQUEsU0FDQSxTQUFBQyxXQU1BWixNQUFBLFdBQ0FDLElBQUEsV0FDQUUsV0FBQSw2QkFDQUQsWUFBQSxlQUNBRSxTQUNBTSxNQUFBLFNBQUEsUUFBQSxPQUFBLFNBQUFKLEVBQUFPLEVBQUFOLEdBQ0EsTUFBQUEsR0FBQUMsZUFBQUQsU0FBQSxXQUNBRCxFQUFBSyxHQUFBLFlBR0FHLFNBQUEsUUFBQSxPQUFBLFNBQUFELEVBQUFOLEdBQ0EsTUFBQUEsR0FBQUMsZUFBQUMsS0FBQSxTQUFBQyxHQUNBLE1BQUFHLEdBQUFFLFdBQUFMLEVBQUFNLEtBQUFDLGlCQUtBbEIsRUFBQW1CLFVBQUEsUUFFQUMsU0FBQSxjQUFBLGtDQzNEQXhCLFFBQUFDLE9BQUEsVUFDQU8sV0FBQSxZQUFBLE9BQUEsU0FBQSxTQUFBSSxFQUFBRCxHQUNBLEdBQUFjLEdBQUFDLElBRUFELEdBQUFFLE1BQ0FDLE1BQUEsR0FDQUMsU0FBQSxJQUlBSixFQUFBSyxNQUFBLFdBSUFsQixFQUFBbUIsa0JBQUFOLEVBQUFFLE1BQUFiLEtBQUEsU0FBQUMsR0FDQUosRUFBQUssR0FBQSxTQUNBLFNBQUFDLEdBQ0FRLEVBQUFSLE1BQUFBLEtBS0FRLEVBQUFPLFNBQUEsV0FLQXBCLEVBQUFxQixZQUFBUixFQUFBRSxNQUFBYixLQUFBLFNBQUFhLEdBQ0FGLEVBQUFLLFNBQ0EsU0FBQWIsR0FDQVEsRUFBQVIsTUFBQUEsUUM5QkFqQixRQUFBQyxPQUFBLFVBQ0FPLFdBQUEsZUFBQSxTQUFBLE1BQUEsT0FBQSxVQUFBLFNBQUFHLEVBQUF1QixFQUFBbkIsRUFBQUksR0FDQSxHQUFBZ0IsR0FBQVQsSUFFQVMsR0FBQWhCLFFBQUFBLEVBRUFnQixFQUFBQyxjQUFBLFdBQ0FELEVBQUFoQixRQUFBa0IsVUFBQUgsRUFBQUksV0FBQXZCLEVBQUFjLFNBQUFELE9BQ0FPLEVBQUFoQixRQUFBb0IsWUNSQXZDLFFBQUFDLE9BQUEsVUFDQXVDLFFBQUEsUUFBQSxnQkFBQSxjQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQSxHQUFBQyxVQUFBRixHQUNBM0IsRUFBQTBCLEVBQUFFLEVBRUEsT0FBQTVCLE1DTEFmLFFBQUFDLE9BQUEsVUFDQXVDLFFBQUEsU0FBQSxpQkFBQSxrQkFBQSxjQUFBLFNBQUFLLEVBQUFDLEVBQUFKLEdBQ0EsR0FBQUssR0FBQSxHQUFBSCxVQUFBRixFQUFBLFNBQ0FNLEVBQUFILEVBQUFFLEdBRUE3QixHQUNBRSxXQUFBLFNBQUFDLEdBQ0EsTUFBQXlCLEdBQUFDLEVBQUFFLE1BQUE1QixLQUVBNkIsZUFBQSxTQUFBN0IsR0FDQSxNQUFBMkIsR0FBQUcsV0FBQTlCLEdBQUErQixhQUVBQyxZQUFBLFNBQUFoQyxHQUNBLE1BQUEsNkJBQUEyQixFQUFBRyxXQUFBOUIsR0FBQWdCLFdBRUFpQixJQUFBTixFQUdBLE9BQUE5QiIsImZpbGUiOiJhcHAuYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhZy1hcHAnLCBbXG5cdCdmaXJlYmFzZScsIFxuXHQndWkucm91dGVyJywgXG5cdCd0ZW1wbGF0ZXNDYWNoZScsIFxuXHQnYW5ndWxhci1tZDUnXG5cdF0pXG4uY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXJcblx0XHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0XHR1cmw6ICcvJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnaG9tZS5odG1sJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdsb2dpbicsIHtcblx0XHRcdHVybDogJy9sb2dpbicsXG5cdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdsb2dpbi5odG1sJyxcblx0XHRcdHJlc29sdmU6IHtcblx0XHRcdCAgcmVxdWlyZU5vQXV0aDogZnVuY3Rpb24oJHN0YXRlLCBBdXRoKXtcblx0XHRcdCAgICByZXR1cm4gQXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uKGF1dGgpe1xuXHRcdFx0ICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG5cdFx0XHQgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0ICAgICAgcmV0dXJuO1xuXHRcdFx0ICAgIH0pO1xuXHRcdFx0ICB9XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuc3RhdGUoJ3JlZ2lzdGVyJywge1xuXHRcdFx0dXJsOiAnL3JlZ2lzdGVyJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnLFxuXHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0ICByZXF1aXJlTm9BdXRoOiBmdW5jdGlvbigkc3RhdGUsIEF1dGgpe1xuXHRcdFx0ICAgIHJldHVybiBBdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24oYXV0aCl7XG5cdFx0XHQgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcblx0XHRcdCAgICB9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHQgICAgICByZXR1cm47XG5cdFx0XHQgICAgfSk7XG5cdFx0XHQgIH1cblx0XHRcdH1cblx0XHR9KVxuXHRcdC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHRcdHVybDogJy9wcm9maWxlJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCBhcyBwcm9maWxlQ3RybCcsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUuaHRtbCcsXG5cdFx0XHRyZXNvbHZlOiB7XG5cdFx0ICAgIGF1dGg6IGZ1bmN0aW9uKCRzdGF0ZSwgVXNlcnMsIEF1dGgpe1xuXHRcdCAgICAgIHJldHVybiBBdXRoLiRyZXF1aXJlQXV0aCgpLmNhdGNoKGZ1bmN0aW9uKCl7XG5cdFx0ICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcblx0XHQgICAgICB9KTtcblx0XHQgICAgfSxcblx0XHQgICAgcHJvZmlsZTogZnVuY3Rpb24oVXNlcnMsIEF1dGgpe1xuXHRcdCAgICAgIHJldHVybiBBdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24oYXV0aCl7XG5cdFx0ICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZShhdXRoLnVpZCkuJGxvYWRlZCgpO1xuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9XG5cdFx0ICB9XG5cdFx0fSk7XG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufSlcbi5jb25zdGFudCgnRmlyZWJhc2VVcmwnLCAnaHR0cHM6Ly9hZy1hcHAuZmlyZWJhc2Vpby5jb20vJyk7IiwiYW5ndWxhci5tb2R1bGUoJ2FnLWFwcCcpXG4uY29udHJvbGxlcignQXV0aEN0cmwnLCBmdW5jdGlvbihBdXRoLCAkc3RhdGUpIHtcblx0dmFyIGF1dGhDdHJsID0gdGhpcztcblxuXHRhdXRoQ3RybC51c2VyID0ge1xuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogJydcblx0fTtcblxuXHQvLyBsb2dpblxuXHRhdXRoQ3RybC5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIGNhbGxzIHRoZSBhdXRoIHNlcnZpY2UgYW5kIHVzZXMgdGhlIGZpcmViYXNlIGZ1bmN0aW9uIFxuXHRcdC8vIGF1dGhXaXRoUGFzc3dvcmQgYnkgcGFzc2luZyBpbiB0aGUgdXNlclxuXHRcdC8vIHRoZW4gaXQgcmVkaXJlY3RzIHRvIHRoZSBob21lIHN0YXRlIGlmIGF1dGhlbnRpY2F0aW9uIHdhcyBzdWNjZXNzZnVsXG5cdFx0QXV0aC4kYXV0aFdpdGhQYXNzd29yZChhdXRoQ3RybC51c2VyKS50aGVuKGZ1bmN0aW9uKGF1dGgpIHtcblx0XHRcdCRzdGF0ZS5nbygnaG9tZScpO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRhdXRoQ3RybC5lcnJvciA9IGVycm9yO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8vIHJlZ2lzdGVyXG5cdGF1dGhDdHJsLnJlZ2lzdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gY2FsbHMgdGhlIGF1dGggc2VydmljZSBhbmQgdXNlcyB0aGUgZmlyZWJhc2UgZnVuY3Rpb25cblx0XHQvLyBjcmVhdGVVc2VyIGJ5IHBhc3NpbmcgaW4gdGVoIHVzZXJcblx0XHQvLyB0aGVuIGl0IGxvZ2luIGluIHRoZSB1c2VyIGJ5IGNhbGxpbmcgdGhlIGxvZ2luIGZ1bmN0aW9uIGluIFxuXHRcdC8vIHRoaXMgY29udHJvbGxlclxuXHRcdEF1dGguJGNyZWF0ZVVzZXIoYXV0aEN0cmwudXNlcikudGhlbihmdW5jdGlvbih1c2VyKSB7XG5cdFx0XHRhdXRoQ3RybC5sb2dpbigpO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRhdXRoQ3RybC5lcnJvciA9IGVycm9yO1xuXHRcdH0pO1xuXHR9O1xuXG5cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhZy1hcHAnKVxuLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgZnVuY3Rpb24oJHN0YXRlLCBtZDUsIGF1dGgsIHByb2ZpbGUpe1xuICAgIHZhciBwcm9maWxlQ3RybCA9IHRoaXM7XG5cblx0cHJvZmlsZUN0cmwucHJvZmlsZSA9IHByb2ZpbGU7XG5cblx0cHJvZmlsZUN0cmwudXBkYXRlUHJvZmlsZSA9IGZ1bmN0aW9uKCl7XG5cdCAgcHJvZmlsZUN0cmwucHJvZmlsZS5lbWFpbEhhc2ggPSBtZDUuY3JlYXRlSGFzaChhdXRoLnBhc3N3b3JkLmVtYWlsKTtcblx0ICBwcm9maWxlQ3RybC5wcm9maWxlLiRzYXZlKCk7XG5cdH07XG5cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhZy1hcHAnKVxuLmZhY3RvcnkoJ0F1dGgnLCBmdW5jdGlvbigkZmlyZWJhc2VBdXRoLCBGaXJlYmFzZVVybCkge1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcblx0dmFyIGF1dGggPSAkZmlyZWJhc2VBdXRoKHJlZik7XG5cblx0cmV0dXJuIGF1dGg7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYWctYXBwJylcbi5mYWN0b3J5KCdVc2VycycsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZpcmViYXNlVXJsKXtcbiAgdmFyIHVzZXJzUmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKyd1c2VycycpO1xuICB2YXIgdXNlcnMgPSAkZmlyZWJhc2VBcnJheSh1c2Vyc1JlZik7XG5cblx0dmFyIFVzZXJzID0ge1xuXHRcdGdldFByb2ZpbGU6IGZ1bmN0aW9uKHVpZCl7XG5cdCAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHVzZXJzUmVmLmNoaWxkKHVpZCkpO1xuXHQgIH0sXG5cdFx0Z2V0RGlzcGxheU5hbWU6IGZ1bmN0aW9uKHVpZCl7XG5cdCAgICByZXR1cm4gdXNlcnMuJGdldFJlY29yZCh1aWQpLmRpc3BsYXlOYW1lO1xuXHQgIH0sXG5cdFx0Z2V0R3JhdmF0YXI6IGZ1bmN0aW9uKHVpZCl7XG4gIFx0XHRyZXR1cm4gJy8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIHVzZXJzLiRnZXRSZWNvcmQodWlkKS5lbWFpbEhhc2g7XG5cdFx0fSxcblx0XHRhbGw6IHVzZXJzXG5cdH07XG5cblx0cmV0dXJuIFVzZXJzO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
